
type @string = [int];

(unit -> int) main = fun (u) {
    (@string) s = "Hello, world!";
    printstr(s);
    return 0;
  };

(@string -> unit) printstr = fun (s) {
    map(printchr, s);
    printchr(10); // newline
    return;
  };

((a -> b) -> [a] -> [b]) map =
  fun (f, list) {
    if (isEmpty(list)) {
      return [];
    } else {
      return f(list.hd) : map(f, list.tl);
    }
  };
